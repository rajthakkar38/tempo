{"ast":null,"code":"var _jsxFileName = \"F:\\\\React Projects\\\\ecommerce\\\\ec\\\\src\\\\App.js\";\nimport { HomePage } from \"./pages/homepage/homepage.component.jsx\";\nimport \"./App.css\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Shop from \"./pages/shop/shop.component.jsx\";\nimport Header from \"./components/header/header.component.jsx\";\nimport SignUpSignIn from \"./pages/sign-up-and-sign-in/sign-up-and-sign-in.component.jsx\";\nimport { auth, createUserDoc, addCollectionandItems } from \"./firebase/firebase.utils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user-action\";\nimport Checkout from \"./pages/checkout/checkout-component.jsx\";\nimport { selectCollectionsForPreview } from \"./redux/shop/shop-selector\";\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"./redux/user/user-selector\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.unsubscribeFromAuth = null;\n  }\n\n  componentDidMount() {\n    const {\n      setCurrentUser,\n      arr\n    } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const ref = await createUserDoc(user);\n        ref.onSnapshot(snap => {\n          setCurrentUser({\n            currentUser: {\n              id: snap.id,\n              ...snap.data()\n            }\n          });\n        });\n      }\n\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/shop\",\n        component: Shop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/checkout\",\n        component: Checkout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signin\",\n        render: () => this.props.currentUser ? /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(SignUpSignIn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 60\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this);\n  }\n\n} // const fun1 = ({ user: { currentUser }, cart: { hidden } }) => ({\n//   currentUser,\n//   hidden,\n// });\n\n\nconst fun1 = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  arr: selectCollectionsForPreview\n});\n\nconst fun = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(fun1, fun)(App);","map":{"version":3,"sources":["F:/React Projects/ecommerce/ec/src/App.js"],"names":["HomePage","Route","Redirect","Shop","Header","SignUpSignIn","auth","createUserDoc","addCollectionandItems","React","connect","setCurrentUser","Checkout","selectCollectionsForPreview","createStructuredSelector","selectCurrentUser","App","Component","unsubscribeFromAuth","componentDidMount","arr","props","onAuthStateChanged","user","ref","onSnapshot","snap","currentUser","id","data","componentWillUnmount","render","fun1","fun","dispatch"],"mappings":";AAAA,SAASA,QAAT,QAAyB,yCAAzB;AACA,OAAO,WAAP;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AACA,OAAOC,IAAP,MAAiB,iCAAjB;AACA,OAAOC,MAAP,MAAmB,0CAAnB;AACA,OAAOC,YAAP,MAAyB,+DAAzB;AACA,SACEC,IADF,EAEEC,aAFF,EAGEC,qBAHF,QAIO,2BAJP;AAKA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,QAA+B,0BAA/B;AACA,OAAOC,QAAP,MAAqB,yCAArB;AACA,SAASC,2BAAT,QAA4C,4BAA5C;AACA,SAASC,wBAAT,QAAyC,UAAzC;AACA,SAASC,iBAAT,QAAkC,4BAAlC;;;AAEA,MAAMC,GAAN,SAAkBP,KAAK,CAACQ,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCC,mBADgC,GACV,IADU;AAAA;;AAGhCC,EAAAA,iBAAiB,GAAG;AAClB,UAAM;AAAER,MAAAA,cAAF;AAAkBS,MAAAA;AAAlB,QAA0B,KAAKC,KAArC;AACA,SAAKH,mBAAL,GAA2BZ,IAAI,CAACgB,kBAAL,CAAwB,MAAOC,IAAP,IAAgB;AACjE,UAAIA,IAAJ,EAAU;AACR,cAAMC,GAAG,GAAG,MAAMjB,aAAa,CAACgB,IAAD,CAA/B;AACAC,QAAAA,GAAG,CAACC,UAAJ,CAAgBC,IAAD,IAAU;AACvBf,UAAAA,cAAc,CAAC;AACbgB,YAAAA,WAAW,EAAE;AACXC,cAAAA,EAAE,EAAEF,IAAI,CAACE,EADE;AAEX,iBAAGF,IAAI,CAACG,IAAL;AAFQ;AADA,WAAD,CAAd;AAMD,SAPD;AAQD;;AACDlB,MAAAA,cAAc,CAACY,IAAD,CAAd;AACD,KAb0B,CAA3B;AAcD;;AAEDO,EAAAA,oBAAoB,GAAG;AACrB,SAAKZ,mBAAL;AACD;;AAEDa,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,8BACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,GAAlB;AAAsB,QAAA,SAAS,EAAE/B;AAAjC;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,OAAZ;AAAoB,QAAA,SAAS,EAAEG;AAA/B;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE,QAAC,KAAD;AAAO,QAAA,IAAI,EAAC,WAAZ;AAAwB,QAAA,SAAS,EAAES;AAAnC;AAAA;AAAA;AAAA;AAAA,cAJF,eAME,QAAC,KAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,IAAI,EAAC,SAFP;AAGE,QAAA,MAAM,EAAE,MACN,KAAKS,KAAL,CAAWM,WAAX,gBAAyB,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAzB,gBAA+C,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAJnD;AAAA;AAAA;AAAA;AAAA,cANF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAgBD;;AA1C+B,C,CA6ClC;AACA;AACA;AACA;;;AAEA,MAAMK,IAAI,GAAGlB,wBAAwB,CAAC;AACpCa,EAAAA,WAAW,EAAEZ,iBADuB;AAEpCK,EAAAA,GAAG,EAAEP;AAF+B,CAAD,CAArC;;AAKA,MAAMoB,GAAG,GAAIC,QAAD,KAAe;AACzBvB,EAAAA,cAAc,EAAGY,IAAD,IAAUW,QAAQ,CAACvB,cAAc,CAACY,IAAD,CAAf;AADT,CAAf,CAAZ;;AAIA,eAAeb,OAAO,CAACsB,IAAD,EAAOC,GAAP,CAAP,CAAmBjB,GAAnB,CAAf","sourcesContent":["import { HomePage } from \"./pages/homepage/homepage.component.jsx\";\nimport \"./App.css\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Shop from \"./pages/shop/shop.component.jsx\";\nimport Header from \"./components/header/header.component.jsx\";\nimport SignUpSignIn from \"./pages/sign-up-and-sign-in/sign-up-and-sign-in.component.jsx\";\nimport {\n  auth,\n  createUserDoc,\n  addCollectionandItems,\n} from \"./firebase/firebase.utils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user-action\";\nimport Checkout from \"./pages/checkout/checkout-component.jsx\";\nimport { selectCollectionsForPreview } from \"./redux/shop/shop-selector\";\nimport { createStructuredSelector } from \"reselect\";\nimport { selectCurrentUser } from \"./redux/user/user-selector\";\n\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n\n  componentDidMount() {\n    const { setCurrentUser, arr } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const ref = await createUserDoc(user);\n        ref.onSnapshot((snap) => {\n          setCurrentUser({\n            currentUser: {\n              id: snap.id,\n              ...snap.data(),\n            },\n          });\n        });\n      }\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header></Header>\n        <Route exact path=\"/\" component={HomePage} />\n        <Route path=\"/shop\" component={Shop} />\n        <Route path=\"/checkout\" component={Checkout} />\n\n        <Route\n          exact\n          path=\"/signin\"\n          render={() =>\n            this.props.currentUser ? <Redirect to=\"/\" /> : <SignUpSignIn />\n          }\n        />\n      </div>\n    );\n  }\n}\n\n// const fun1 = ({ user: { currentUser }, cart: { hidden } }) => ({\n//   currentUser,\n//   hidden,\n// });\n\nconst fun1 = createStructuredSelector({\n  currentUser: selectCurrentUser,\n  arr: selectCollectionsForPreview,\n});\n\nconst fun = (dispatch) => ({\n  setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n});\n\nexport default connect(fun1, fun)(App);\n"]},"metadata":{},"sourceType":"module"}