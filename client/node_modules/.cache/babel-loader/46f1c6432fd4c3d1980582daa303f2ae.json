{"ast":null,"code":"var _jsxFileName = \"F:\\\\React Projects\\\\ecommerce\\\\ec\\\\src\\\\App.js\";\nimport { HomePage } from \"./pages/homepage/homepage.component.jsx\";\nimport \"./App.css\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Shop from \"./pages/shop/shop.component.jsx\";\nimport Header from \"./components/header/header.component.jsx\";\nimport SignUpSignIn from \"./pages/sign-up-and-sign-in/sign-up-and-sign-in.component.jsx\";\nimport { auth, createUserDoc } from \"./firebase/firebase.utils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user-action\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.unsubscribeFromAuth = null;\n  }\n\n  componentDidMount() {\n    const {\n      setCurrentUser\n    } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const ref = await createUserDoc(user);\n        ref.onSnapshot(snap => {\n          setCurrentUser({\n            currentUser: {\n              id: snap.id,\n              ...snap.data()\n            }\n          }, () => {\n            console.log(this.state.currentUser);\n          });\n        });\n      }\n\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/shop/\",\n        component: Shop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signin/\",\n        render: () => this.props.currentUser ? /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(SignUpSignIn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 60\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst fun = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(fun1, fun)(App);","map":{"version":3,"sources":["F:/React Projects/ecommerce/ec/src/App.js"],"names":["HomePage","Route","Redirect","Shop","Header","SignUpSignIn","auth","createUserDoc","React","connect","setCurrentUser","App","Component","unsubscribeFromAuth","componentDidMount","props","onAuthStateChanged","user","ref","onSnapshot","snap","currentUser","id","data","console","log","state","componentWillUnmount","render","fun","dispatch","fun1"],"mappings":";AAAA,SAASA,QAAT,QAAyB,yCAAzB;AACA,OAAO,WAAP;AACA,SAASC,KAAT,EAAgBC,QAAhB,QAAgC,kBAAhC;AACA,OAAOC,IAAP,MAAiB,iCAAjB;AACA,OAAOC,MAAP,MAAmB,0CAAnB;AACA,OAAOC,YAAP,MAAyB,+DAAzB;AACA,SAASC,IAAT,EAAeC,aAAf,QAAoC,2BAApC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,cAAT,QAA+B,0BAA/B;;;AAEA,MAAMC,GAAN,SAAkBH,KAAK,CAACI,SAAxB,CAAkC;AAAA;AAAA;AAAA,SAChCC,mBADgC,GACV,IADU;AAAA;;AAGhCC,EAAAA,iBAAiB,GAAG;AAClB,UAAM;AAAEJ,MAAAA;AAAF,QAAqB,KAAKK,KAAhC;AACA,SAAKF,mBAAL,GAA2BP,IAAI,CAACU,kBAAL,CAAwB,MAAOC,IAAP,IAAgB;AACjE,UAAIA,IAAJ,EAAU;AACR,cAAMC,GAAG,GAAG,MAAMX,aAAa,CAACU,IAAD,CAA/B;AACAC,QAAAA,GAAG,CAACC,UAAJ,CAAgBC,IAAD,IAAU;AACvBV,UAAAA,cAAc,CACZ;AACEW,YAAAA,WAAW,EAAE;AACXC,cAAAA,EAAE,EAAEF,IAAI,CAACE,EADE;AAEX,iBAAGF,IAAI,CAACG,IAAL;AAFQ;AADf,WADY,EAOZ,MAAM;AACJC,YAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWL,WAAvB;AACD,WATW,CAAd;AAWD,SAZD;AAaD;;AACDX,MAAAA,cAAc,CAACO,IAAD,CAAd;AACD,KAlB0B,CAA3B;AAmBD;;AAEDU,EAAAA,oBAAoB,GAAG;AACrB,SAAKd,mBAAL;AACD;;AAEDe,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,SAAS,EAAC,KAAf;AAAA,8BACE,QAAC,MAAD;AAAA;AAAA;AAAA;AAAA,cADF,eAEE,QAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,GAAlB;AAAsB,QAAA,SAAS,EAAE5B;AAAjC;AAAA;AAAA;AAAA;AAAA,cAFF,eAGE,QAAC,KAAD;AAAO,QAAA,KAAK,MAAZ;AAAa,QAAA,IAAI,EAAC,QAAlB;AAA2B,QAAA,SAAS,EAAEG;AAAtC;AAAA;AAAA;AAAA;AAAA,cAHF,eAIE,QAAC,KAAD;AACE,QAAA,KAAK,MADP;AAEE,QAAA,IAAI,EAAC,UAFP;AAGE,QAAA,MAAM,EAAE,MACN,KAAKY,KAAL,CAAWM,WAAX,gBAAyB,QAAC,QAAD;AAAU,UAAA,EAAE,EAAC;AAAb;AAAA;AAAA;AAAA;AAAA,gBAAzB,gBAA+C,QAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAJnD;AAAA;AAAA;AAAA;AAAA,cAJF;AAAA;AAAA;AAAA;AAAA;AAAA,YADF;AAcD;;AA7C+B;;AAgDlC,MAAMQ,GAAG,GAAIC,QAAD,KAAe;AACzBpB,EAAAA,cAAc,EAAGO,IAAD,IAAUa,QAAQ,CAACpB,cAAc,CAACO,IAAD,CAAf;AADT,CAAf,CAAZ;;AAIA,eAAeR,OAAO,CAACsB,IAAD,EAAOF,GAAP,CAAP,CAAmBlB,GAAnB,CAAf","sourcesContent":["import { HomePage } from \"./pages/homepage/homepage.component.jsx\";\nimport \"./App.css\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Shop from \"./pages/shop/shop.component.jsx\";\nimport Header from \"./components/header/header.component.jsx\";\nimport SignUpSignIn from \"./pages/sign-up-and-sign-in/sign-up-and-sign-in.component.jsx\";\nimport { auth, createUserDoc } from \"./firebase/firebase.utils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user-action\";\n\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n\n  componentDidMount() {\n    const { setCurrentUser } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const ref = await createUserDoc(user);\n        ref.onSnapshot((snap) => {\n          setCurrentUser(\n            {\n              currentUser: {\n                id: snap.id,\n                ...snap.data(),\n              },\n            },\n            () => {\n              console.log(this.state.currentUser);\n            }\n          );\n        });\n      }\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header></Header>\n        <Route exact path=\"/\" component={HomePage} />\n        <Route exact path=\"/shop/\" component={Shop} />\n        <Route\n          exact\n          path=\"/signin/\"\n          render={() =>\n            this.props.currentUser ? <Redirect to=\"/\" /> : <SignUpSignIn />\n          }\n        />\n      </div>\n    );\n  }\n}\n\nconst fun = (dispatch) => ({\n  setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n});\n\nexport default connect(fun1, fun)(App);\n"]},"metadata":{},"sourceType":"module"}