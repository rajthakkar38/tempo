{"ast":null,"code":"var _jsxFileName = \"F:\\\\React Projects\\\\ecommerce\\\\ec\\\\src\\\\App.js\";\nimport { HomePage } from \"./pages/homepage/homepage.component.jsx\";\nimport \"./App.css\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Shop from \"./pages/shop/shop.component.jsx\";\nimport Header from \"./components/header/header.component.jsx\";\nimport SignUpSignIn from \"./pages/sign-up-and-sign-in/sign-up-and-sign-in.component.jsx\";\nimport { auth, createUserDoc } from \"./firebase/firebase.utils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user-action\";\nimport Checkout from \"./pages/checkout/checkout-component.jsx\";\nimport Category from \"./components/category/category-component\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.unsubscribeFromAuth = null;\n  }\n\n  componentDidMount() {\n    const {\n      setCurrentUser\n    } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async user => {\n      if (user) {\n        const ref = await createUserDoc(user);\n        ref.onSnapshot(snap => {\n          setCurrentUser({\n            currentUser: {\n              id: snap.id,\n              ...snap.data()\n            }\n          });\n        });\n      }\n\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/\",\n        component: HomePage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/shop/\",\n        component: Shop\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: \"/checkout/\",\n        component: Checkout\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        path: `shop/:categoryId`,\n        component: Category\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Route, {\n        exact: true,\n        path: \"/signin/\",\n        render: () => this.props.currentUser ? /*#__PURE__*/_jsxDEV(Redirect, {\n          to: \"/\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 38\n        }, this) : /*#__PURE__*/_jsxDEV(SignUpSignIn, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 60\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nconst fun1 = ({\n  user: {\n    currentUser\n  },\n  cart: {\n    hidden\n  }\n}) => ({\n  currentUser,\n  hidden\n});\n\nconst fun = dispatch => ({\n  setCurrentUser: user => dispatch(setCurrentUser(user))\n});\n\nexport default connect(fun1, fun)(App);","map":{"version":3,"sources":["F:/React Projects/ecommerce/ec/src/App.js"],"names":["HomePage","Route","Redirect","Shop","Header","SignUpSignIn","auth","createUserDoc","React","connect","setCurrentUser","Checkout","Category","App","Component","unsubscribeFromAuth","componentDidMount","props","onAuthStateChanged","user","ref","onSnapshot","snap","currentUser","id","data","componentWillUnmount","render","fun1","cart","hidden","fun","dispatch"],"mappings":"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","sourcesContent":["import { HomePage } from \"./pages/homepage/homepage.component.jsx\";\nimport \"./App.css\";\nimport { Route, Redirect } from \"react-router-dom\";\nimport Shop from \"./pages/shop/shop.component.jsx\";\nimport Header from \"./components/header/header.component.jsx\";\nimport SignUpSignIn from \"./pages/sign-up-and-sign-in/sign-up-and-sign-in.component.jsx\";\nimport { auth, createUserDoc } from \"./firebase/firebase.utils\";\nimport React from \"react\";\nimport { connect } from \"react-redux\";\nimport { setCurrentUser } from \"./redux/user/user-action\";\nimport Checkout from \"./pages/checkout/checkout-component.jsx\";\nimport Category from \"./components/category/category-component\";\n\nclass App extends React.Component {\n  unsubscribeFromAuth = null;\n\n  componentDidMount() {\n    const { setCurrentUser } = this.props;\n    this.unsubscribeFromAuth = auth.onAuthStateChanged(async (user) => {\n      if (user) {\n        const ref = await createUserDoc(user);\n        ref.onSnapshot((snap) => {\n          setCurrentUser({\n            currentUser: {\n              id: snap.id,\n              ...snap.data(),\n            },\n          });\n        });\n      }\n      setCurrentUser(user);\n    });\n  }\n\n  componentWillUnmount() {\n    this.unsubscribeFromAuth();\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Header></Header>\n        <Route exact path=\"/\" component={HomePage} />\n        <Route path=\"/shop/\" component={Shop} />\n        <Route path=\"/checkout/\" component={Checkout} />\n        <Route path={`shop/:categoryId`} component={Category}></Route>\n        <Route\n          exact\n          path=\"/signin/\"\n          render={() =>\n            this.props.currentUser ? <Redirect to=\"/\" /> : <SignUpSignIn />\n          }\n        />\n      </div>\n    );\n  }\n}\n\nconst fun1 = ({ user: { currentUser }, cart: { hidden } }) => ({\n  currentUser,\n  hidden,\n});\n\nconst fun = (dispatch) => ({\n  setCurrentUser: (user) => dispatch(setCurrentUser(user)),\n});\n\nexport default connect(fun1, fun)(App);\n"]},"metadata":{},"sourceType":"module"}